# 本地磁力搜索卡片服务

这是一个运行在本地的网页服务，允许你输入关键字或直接粘贴磁力链接，然后从远端磁力搜索服务获取结果，并将其以卡片形式清晰地展示。

## 功能特性

- ✅ 支持关键字搜索与磁力链接粘贴
- ✅ 默认连接公开磁力搜索服务（可通过环境变量覆盖）
- ✅ 远端服务不可用时自动回退到本地示例数据
- ✅ 结果以卡片形式展示，包含大小、做种数、Info Hash 等信息
- ✅ 一键复制磁力链接

## 快速开始

```bash
npm install
npm start
```

服务默认运行在 <http://localhost:3000>。

## 环境变量

| 变量名 | 默认值 | 说明 |
| --- | --- | --- |
| `PORT` | `3000` | 服务监听端口 |
| `MAGNET_SEARCH_ENDPOINT` | `https://apibay.org/q.php` | 远端磁力搜索 API。必须支持 `?q=<关键词>` 的查询参数，并返回数组 JSON |

可以在项目根目录创建 `.env` 文件覆盖默认配置。

## 目录结构

```
.
├── data/                 # 本地示例结果，用于远端失败时回退
├── public/               # 前端静态资源（HTML/CSS/JS）
├── src/
│   └── server.js         # Express 后端：代理搜索与静态文件
├── package.json
├── package-lock.json
└── README.md
```

## 自定义远端搜索服务

如果你有自己的磁力搜索 API，可以通过设置 `MAGNET_SEARCH_ENDPOINT` 指向它。后端会向该地址发起 `GET` 请求，并附带 `q` 参数，将响应映射为卡片数据。

只要远端返回的数组元素包含至少以下字段即可：

```json
{
  "name": "资源标题",
  "info_hash": "哈希",
  "size": 123,
  "seeders": 10,
  "leechers": 2,
  "added": 1697190000
}
```

## 注意事项

- 默认的公开服务可能并非一直可用，如果失败，界面会提示“使用本地数据”。
- 用于演示的本地数据位于 `data/sampleResults.json`，可自行替换为真实数据。
- 复制磁力链接需要浏览器支持 `navigator.clipboard`。如果不支持，会退化为在新标签页打开磁力链接。

祝你使用愉快！
