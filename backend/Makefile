.PHONY: dev run build clean fmt test

# å¼€å‘æ¨¡å¼ï¼ˆçƒ­é‡è½½ï¼‰
dev:
	@echo "ğŸ”¥ å¯åŠ¨å¼€å‘æ¨¡å¼ï¼ˆçƒ­é‡è½½ï¼‰..."
	@air

# æ™®é€šè¿è¡Œ
run:
	@echo "ğŸš€ å¯åŠ¨æœåŠ¡..."
	@go run ./cmd/server

# ç¼–è¯‘
build:
	@echo "ğŸ“¦ ç¼–è¯‘é¡¹ç›®..."
	@go build -o bin/seedmanage ./cmd/server

# æ ¼å¼åŒ–ä»£ç 
fmt:
	@echo "âœ¨ æ ¼å¼åŒ–ä»£ç ..."
	@gofmt -w .
	@goimports -w .

# è¿è¡Œæµ‹è¯•
test:
	@echo "ğŸ§ª è¿è¡Œæµ‹è¯•..."
	@go test -v ./...

# æ¸…ç†
clean:
	@echo "ğŸ§¹ æ¸…ç†ä¸´æ—¶æ–‡ä»¶..."
	@rm -rf tmp/ bin/
	@go clean

# å®‰è£…ä¾èµ–å·¥å…·
install-tools:
	@echo "ğŸ”§ å®‰è£…å¼€å‘å·¥å…·..."
	@go install github.com/air-verse/air@latest
	@go install golang.org/x/tools/cmd/goimports@latest

# å¸®åŠ©ä¿¡æ¯
help:
	@echo "å¯ç”¨å‘½ä»¤ï¼š"
	@echo "  make dev           - å¯åŠ¨å¼€å‘æ¨¡å¼ï¼ˆçƒ­é‡è½½ï¼‰"
	@echo "  make run           - æ™®é€šè¿è¡Œ"
	@echo "  make build         - ç¼–è¯‘é¡¹ç›®"
	@echo "  make fmt           - æ ¼å¼åŒ–ä»£ç "
	@echo "  make test          - è¿è¡Œæµ‹è¯•"
	@echo "  make clean         - æ¸…ç†ä¸´æ—¶æ–‡ä»¶"
	@echo "  make install-tools - å®‰è£…å¼€å‘å·¥å…·"

